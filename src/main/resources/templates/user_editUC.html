<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Unit Course (UC)</title>
    <link rel="stylesheet" type="text/css" href="/css/user_editUC.css">
</head>

<body>
    <header>
        <nav>
            <button onclick="window.location.href='/logout'">Logout</button>
            <button onclick="window.location.href='/backUser'">Back</button>
        </nav>
    </header>

    <main>
        <section class="section">
            <h2>Edit Unit Course Details</h2>

            <!-- Form to update the UC details -->
            <form th:action="@{/user_editUC/{id}(id=${uc.id})}" method="POST">
                <!-- Name of the UC -->
                <label for="ucName">Name of UC:</label>
                <input type="text" id="ucName" name="ucName" th:value="${uc.nameUC}" required>
                <br><br>

                <!-- Number of Students -->
                <label for="ucNumStudents">Number of Students:</label>
                <input type="number" id="ucNumStudents" name="ucNumStudents" th:value="${uc.studentsNumber}" required>
                <br><br>

                <!-- Type of UC -->
                <label for="ucEvaluationType">Type of UC:</label>
                <select name="ucEvaluationType" id="ucEvaluationType" required>
                    <option value="Continuous" th:selected="${uc.evaluationType == 'Continuous'}">Continuous</option>
                    <option value="Mixed" th:selected="${uc.evaluationType == 'Mixed'}">Mixed</option>
                </select>
                <br><br>

                <!-- Number of Evaluations -->
                <label for="ucEvaluationsCount">Number of Evaluations:</label>
                <input type="number" id="ucEvaluationsCount" name="ucEvaluationsCount" min="0" th:value="${uc.evaluationsCount}" required onchange="updateEvaluationFields()">
                <br><br>

                <!-- Year of the UC -->
                <label for="ucYear">Year:</label>
                <select id="ucYear" name="ucYear" required>
                    <option value="1" th:selected="${uc.year == 1}">1st Year</option>
                    <option value="2" th:selected="${uc.year == 2}">2nd Year</option>
                    <option value="3" th:selected="${uc.year == 3}">3rd Year</option>
                </select>
                <br><br>

                <!-- Semester of the UC -->
                <label for="ucSemester">Semester:</label>
                <select id="ucSemester" name="ucSemester" required>
                    <option value="1" th:selected="${uc.semester == 1}">1st Semester</option>
                    <option value="2" th:selected="${uc.semester == 2}">2nd Semester</option>
                </select>
                <br><br>

                <!-- Attendance Required -->
                <label for="ucAttendance">Attendance Required:</label>
                <input type="checkbox" id="ucAttendance" name="ucAttendance" th:checked="${uc.attendance}">
                <br><br>

                <!-- Dynamic Evaluation Fields -->
                <div id="evaluation-list"></div>
                <br><br>

                <button type="submit">Update UC</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 University - Academic Administration System</p>
    </footer>

    <script>
        const evaluationOptions = [
            'Test',
            'Final Exam in Exam Period',
            'Work Developed Throughout the Semester',
            'Work Submission',
            'Group Work Submission',
            'Work Presentation',
            'Group Work Presentation',
            'Monograph',
            'Individual Practical Exercise',
            'Pitch',
            'Final Exam',
            'Oral Exam'
        ];

        window.onload = function () {
            const numEvaluationsField = document.getElementById('ucEvaluationsCount');
            const ucEvaluationTypeField = document.getElementById('ucEvaluationType');

            // Update fields on page load
            updateEvaluationTypeAndMin(ucEvaluationTypeField.value);

            // Add listener for changes in UC type
            ucEvaluationTypeField.addEventListener('change', function () {
                updateEvaluationTypeAndMin(this.value);
            });

            // Initialize evaluation fields based on current number
            updateEvaluationFields();
        };

        // Function to update evaluation type and minimum evaluations
        function updateEvaluationTypeAndMin(typeUC) {
            const numEvaluationsField = document.getElementById('ucEvaluationsCount');

            if (typeUC === 'Mixed') {
                numEvaluationsField.value = Math.max(numEvaluationsField.value, 2);
                numEvaluationsField.setAttribute('min', 2);
            } else if (typeUC === 'Continuous') {
                numEvaluationsField.value = Math.max(numEvaluationsField.value, 3);
                numEvaluationsField.setAttribute('min', 3);
            }
            updateEvaluationFields();
        }

        // // Function to dynamically create evaluation fields
        // function updateEvaluationFields() {
        //     const numEvaluations = document.getElementById('ucEvaluationsCount').value;
        //     const evaluationList = document.getElementById('evaluation-list');
        //     evaluationList.innerHTML = ''; // Clear previous fields

        //     if (numEvaluations <= 0) return; // Do nothing if the number is 0 or invalid

        //     for (let i = 0; i < numEvaluations; i++) {
        //         const div = document.createElement('div');
        //         div.classList.add('evaluation-item');
        //         div.style.marginBottom = '20px';

        //         // Add Evaluation Fields
        //         div.innerHTML = `
        //             <label>Evaluation ${i + 1} Type:</label>
        //             <select name="evaluation-type-${i}">
        //                 ${evaluationOptions.map(option => `<option value="${option}">${option}</option>`).join('')}
        //             </select>
        //             <label>Weight (%):</label>
        //             <input type="number" name="evaluation-weight-${i}" min="0" max="100" required>
        //             <label>Exam Period:</label>
        //             <select name="evaluation-exam-period-${i}">
        //                 <option value="None">None</option>
        //                 <option value="Teaching Period">Teaching Period</option>
        //                 <option value="Exam Period">Exam Period</option>
        //                 <option value="Resource Period">Resource Period</option>
        //                 <option value="Special Period">Special Period</option>
        //             </select>
        //             <label>Requires Computer:</label>
        //             <input type="checkbox" name="evaluation-computer-${i}">
        //             <label>At usual class time?</label>
        //             <input type="checkbox" name="evaluation-class-time-${i}" id="evaluation-class-time-${i}" onclick="toggleRoomField(${i})">
        //             <label>Start Date & Time:</label>
        //             <input type="datetime-local" name="evaluation-date-start-${i}" required>
        //             <label>End Date & Time:</label>
        //             <input type="datetime-local" name="evaluation-date-end-${i}" required>
        //             <label>Room:</label>
        //             <input type="text" name="evaluation-room-${i}" id="evaluation-room-${i}-input" value="Room 1">
        //         `;

        //         evaluationList.appendChild(div);
        //     }
        // }

        // // Toggle Room Field based on class time checkbox
        // function toggleRoomField(i) {
        //     const classTimeCheckbox = document.getElementById(`evaluation-class-time-${i}`);
        //     const roomInput = document.getElementById(`evaluation-room-${i}-input`);
        //     roomInput.disabled = classTimeCheckbox.checked;
        // }
    </script>
</body>

</html>
