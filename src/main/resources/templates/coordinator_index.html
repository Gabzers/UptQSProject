<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course List - UC Management</title>
    <link rel="stylesheet" type="text/css" href="/css/coordinator_index.css?v=1.0">
</head>
<body>
    <header>
        <h1>Course List</h1>
        <nav class="header-buttons">
            <button onclick="window.location.href='/coordinator/create-uc'">Create UC</button>
            <button onclick="window.location.href='/coordinator/map'">Assessment Course Map</button>
            <button id="logoutBtn" onclick="window.location.href='/logout'">Logout</button>
        </nav>
    </header>

    <main>
        <section class="section">
            <h2>Available Unit Courses (UCs)</h2>

            <!-- Check if curricularUnits is not null and not empty -->
            <div th:if="${curricularUnits != null && curricularUnits.size() > 0}">
                <table>
                    <thead>
                        <tr>
                            <th>UC Name</th>
                            <th>Number of Students</th>
                            <th>Evaluation Type</th>
                            <th>Evaluations</th>
                            <th>Curricular Year</th>
                            <th>Semester</th>
                            <th>Attendance</th> <!-- New column for attendance -->
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Loop through the list of curricular units -->
                        <tr th:each="uc : ${curricularUnits}">
                            <td th:text="${uc.nameUC}">UC Name</td>
                            <td th:text="${uc.studentsNumber}">0</td>
                            <td th:text="${uc.evaluationType}">None</td>
                            <td th:text="${uc.evaluationsCount}">0</td>
                            <td th:text="${uc.year}">1</td>
                            <td th:text="${uc.semester}">1</td>
                            <td th:text="${uc.attendance}">0</td> <!-- Display the attendance -->
                            <td>
                                <!-- Edit Button -->
                                <button class="edit" th:onclick="'window.location.href=\'/coordinator/coordinator_editUC?id=' + ${uc.id} + '\''">Edit</button>
                                
                                <!-- Evaluations Button -->
                                <button class="edit" th:onclick="'window.location.href=\'/coordinator/coordinator_evaluationsUC?id=' + ${uc.id} + '\''">Evaluations</button>
                                
                                <!-- Remove Button as a form -->
                                <form th:action="@{/coordinator/remove-uc/{id}(id=${uc.id})}" method="POST" style="display:inline;">
                                    <button class="delete" type="submit">Remove</button>
                                </form>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Message when no curricular units are found -->
            <p th:if="${curricularUnits == null || curricularUnits.size() == 0}">
                No curricular units found. Please create a new UC.
            </p>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 University - Academic Administration System</p>
    </footer>

</body>
</html>
